## 数据库介绍

数据库是一个用于存储、检索、管理和处理数据的系统。它们是信息管理的关键组件，在许多应用程序和组织中发挥着核心作用。数据库允许用户高效效地组织、存储和查询大量信息。

### 基本概念

1. **数据的组织和存储**：数据库通过表格式的形式存储数据，表格中的每一行代表一个数据项，每一列代表该数据项的一个属性。
2. **数据管理系统（DBMS）**：数据库通常通过一个数据库管理系统进行管理。DBMS 是一种软件，它提供了创建、管理和操作数据库的工具和功能
3. **数据完整性和安全性**：数据库设计时会考虑数据的完整性（确保数据的准确性和一致性）和安全性（保护数据免受未授权访问和损坏）

### 发展历史

1. **早期文件系统**：在数据库出现之前，数据存储在文件系统中，每个应用程序都需要单独的文件处理程序来读写数据，这种方式效率低下，且数据共享和集成困难。
2. **层次式和网状数据库**：随着计算机技术的发展，出现了层次式和网状数据库系统。它们提供了比文件系统更复杂的数据组织方式，但数据的物理结构和应用程序紧密耦合，灵活性有限。
3. **关系型数据库**：这种模型用表格的形式来组织了数据，并通过 SQL（结构化查询语言）进行操作，大大提高了灵活性和易用性。
4. **对象数据库和NoSQL**：随着面向对象编程的普及，对象数据库（ObjectStroe和 Versant）出现。同时，为了应对大数据和高扩展性的需求，NoSQL 数据库（如 MongDB, Cassandra）也开始兴起
5. **云数据和大数据**：云计算的兴起带来了基于云的数据库服务（如 Amazon RDS, Google Cloud SQL，腾讯云，阿里云等），同时大数据技术（如 Hadoop， Spark）也影响了数据库技术的发展。

### 数据库类型
1. **关系型数据库**：这是最常见的数据库类型，如 MySQL PostgreSQL SQLite 和 Oracle。它们使用表来存储数据，这些表通过关系（例如，外键）相互连接。
2. **非关系型数据库**：又称为 NoSQL 数据库，如 MongoDB\Cassandra 和 Redis 。这类数据库不使用传统的表格模型，而是采用文档，键值对、图或列存储数据。
3. 对象数据库：这种数据库将数据作为对象存储，与面向对象编程语言中的对象类型

### MySQL数据库

MySQL 是一个开源的关系型数据库管理系统（RDBMS），使用结构化查询语言（SQL）进行数据管理。它是由瑞典的 MySQL AB 公司开发的，后来被 Sun Microsystems 收购，Sun 随后又被甲骨文公司（ Oracle Corporation）收购。作为世界上最流行的开源数据库之一，MySQL 在小型到大型的应用程序中都得到了广泛的使用，尤其是在与Web应用结合时。

## MySql 安装和连接

当前文档基于 MySQL8.x 进行编写，它的安装其实非常简单，只需几个关键步骤

### 下载 MySQL

1. **访问官方网站**：前往 MySQL 的官方网站 [下载MySQL](https://dev.mysql.com/downloads/mysql/ "MySQL 官网")
2. **选择版本**：基于我们的操作系统，选择对应系统的版本
3. **选择安装包类型**：依据我们的操作系统选择合适的安装包类型（如 windows 上的 MSI 安装程序，Linux 上的 RPM 包， mac 上的 DMG）
4. **下载**：下载相应版本的安装文件，对于个人使用，我们可以选择 `Community` 版本，这是一个免费开源的版本。
![下载MySQL](../img/mysql_01.png)

### 安装 MySQL

1. windows 安装
   1. 运行下载的 MSI 文件
   2. 按照安装向导步骤操作，选择所需的配置选项，如安装路径、配置类型（开发者、服务器、客户端）等。
   3. 设置 root 用户密码，并记住它，因为后续需要用到
   4. 配置 MySQL 服务，包括是否在系统启动时自动运行（可选）

2. Linux 安装
   1. 对于使用 RPM 包的 Linux 发行版（如 Red Hat、Fedora、CentOS），使用 `rpm` 命令安装。
   2. 对于 Debian或 Ubuntu，可能需要使用 `dpkg` 命令或通过添加 MySQL 仓库后使用 `apt-get` 安装。
   3. 安装过程中需要设置 root 用户名密码
   4. 启动 MySQL 服务，并确保它在启动时自动运行

3. macOS 安装
   1. 运行下载的 DMG 文件
   2. 遵循安装向导进行安装
   3. 设置 root 用户密码，并启动 MySQL 服务

### 命令行连接

在命令行（或终端）中连接到 MySQL 数据库，通常使用 MySQL客户端工具。但是在实际生产环境中，我们一般采用 GUI 可视化工具。

**01 基本命令**

```shell
  mysql -u [username] -p[password] -h [hostname] -P [port]
```

**说明**

1. `-u [username]` mysql 的用户名
2. `-p [password]` mysql 的密码，注意 -p 和密码之间没有空格。如果省略密码，系统在执行命令后会提示我们输入
3. `-h [hostname]` mysql 服务器的主机名，如果 mysql 服务器运行在本地机器上，可以使用 localhost ，或省略该选项
4. `-p [port]` mysql 服务器监听的端口号，如果是默认端口（3306），可以省略该选项

**示例**

假设我们的用户名是 `root` ，密码是 `123456`，mysql 服务器运行在本地机器上，使用默认端口，则连接命令为：

```bash
mysql -u root -p 123456
mysql -u root -p 然后依据提示输入密码
```

**02 注意事项**

1. 确保在运行 mysql 客户端之前， MySQL 服务已经启动
2. 在生产环境中，为了安全起见，避免在命令行中直接包含密码，最好在提示时输入

### GUI连接

MySQL 数据库的图形用户界面（GUI）工具提供了一种直观和友好的方式来管理数据库，执行查询，以及进行数据库设计和优化。

**01 MySQL Workbench**

它是 MySQL 官方提供的一个强大的可视化工具，它提供了数据库设计，sql 开发，数据库管理和服务器配置等功能。通过它的 EER(增强实体-关系)图功能，用户可以非常直观地设计和修入数据库结构

**02 Navicat for MySQL**

它是一个商业的数据库管理工具，提供跨平台支持（windows macos linux）。它具有丰富的功能，如数据库设计、数据同步、备份、导入、导出等功能，适用于专业开发人员和新手。推荐购买正版使用

## 初识 SQL 语句

### 认识 SQL 语句

SQL(Structured Query Language) 是一种专门用于管理和操作关系型数据库的编程语言，它允许用户创建、修改、管理和检索数据库中存储的数据。 SQL 的设计目录是提供一种简单有效的方式来读写复杂的数据结构。

1. **标准化**：SQL 是一种标准化的语言，被广泛应用于各种数据库系统中，如 MySQL, SQL Server，Oracle 等。
2. **声明性**：与过程性编译语言不同，SQL 是声明性的。用户只需要指定要完成的任务（例如检索和更新数据），而不是需要提供具体的步骤或方法来完成这些任务。
3. **多功能性**：SQL 可以用来执行各种数据操作，包括数据查询、数据更新（插入、修改、删除）数据库和表的创建和修改，以及数据访问控制。

### SQL 语句分类

**01 数据定义语句（DDL）**
- 用途：用于定义和修改数据库(表)结构
- 关键字：`CREATE` `ALTER` `DROP`
- 示例：`CREATE TABLE users (id INT, name VARCHAR(50))`
- 说明：DDL 用于创建新的数据库、表、视图等，或者修改现有数据库结构的布局。`CREATE` 用于创建新结构， `ALTER` 用于修改现有结构，`DROP` 用于删除结构。

**02 数据操作语句（DML）**
- 用途：用于在数据库中插入、更新、删除数据
- 关键字：`INSERT` `UPDATE` `DELETE`
- 示例：`INSERT INTO users (id, name) values(1, 'syy')`
- 说明：DML 用于管理数据库中的表的数据，`INSERT` 用于添加新的记录， `UPDATE` 用于更新现有记录，`DELETE` 用于删除记录

**03 数据查询语句（DQL）**
- 用途：用于查询数据库中表的数据
- 关键键：`SELECT`
- 示例：`SELECT name, age FROM users WHERE age>18`
- 说明：此类 SQL 用于从数据库的表中查询数据，可以使用各种条件来过滤数据，选择特定列，以及对结果进行排序和分组

**04 数据控制句语（DCL）**
- 用途：用于管理数据库的权限和安全
- 关键字：`GRANT` `REVOKE`
- 示例：`GRANT SELECT ON database.tabale TO user`
- 说明：DCL 涉及到数据库的安全性和用户权限，`GRANT` 用于授权，而 `REVOKE` 用于撤权



## 数据库操作（DDL）

上文提到过 DDL 语句的用途就是用来控制数据库、数据表的增、删、改操作。这里就归纳一些生产过程中可能会用到的数据库操.

### 创建数据库

在创建数据库的时候，如果数据已经存在，标准的 `CREATE DATABASE` 语句会导致语法错误。为了避免这种情况，我们可以使用 `IF NOT EXISTS` 选项，这样的话，如果数据库已经存在，SQL 命令就不会执行任何操作，也不会显示报错。

```shell
# 创建一个数据库，如果它不存在的话
CREATE DATABASE IF NOT EXISTS database_name
```

**说明**
- `IF NOT EXISTS` 这是一个条件判断，用于检查指定的数据库名称是否已存在，如果数据库不存在，那么就会创建一个新的数据库；如果已经存在，那么 SQL 命令不会执行任何操作，也不会引发错误。
- `database_name` 是我们要创建的数据库名称。名称应该遵循数据库系统的命名规则，例如：不包含特殊字符、不与保留字冲突等

**注意**
- `命名规则`：选择的数据库名称应该符合特定的规则和限制，例如：避免使用空格、特殊字符或关键字。
- `字符集和排序规则`：在创建数据库时，我们可以指定字符集和排序规则。

```shell
CREATE DATABASE IF NOT EXISTS mydatabase
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci
```

这里指定了字符集为 `utf8mb4` 和对应的排序规则 `utf8mb4_unicode_ci`

### 删除数据库

删除数据库是一个重要操作，一旦执行，所有存储在数据库中的数据将被永久删除。

```shell
DROP DATABASE IF EXISTS database_name
DROP DATABASE IF EXISTS mydatabase
```

**注意**
- `IF EXISTS` 这个条件用于检查指定的数据库是否存在，如果数据库存在，则执行删除操作；如果不存在，则不执行任何操作，避免了错误。
- `操作前备份`：在执行删除操作之前，请确保已备份所有重要数据。

### 修改数据库

修改数据库通常涉及更改其配置或参数。这类操作依赖于具体的数据库系统和设置，但是修改数据的操作在实际生产时，并不常见，因为在设计之初这些信息都应制定完善。

**示例**

在 MySQL 中，修改数据库的字符集和排序规则

```shell
ALTER DATABASE database_name
CHARACTER SET = utf8mb4
COLLATE=utf8mb4_unicode_ci
```

**注意**
- 修改数据库属性可能会影响存储在其中的数据，应该谨慎操作
- 一些修改可能需要数据库重启才能生效

### 使用某个数据库

在执行针对特定数据库的操作之间，需要先选择（使用）这个数据库

```bash
  USE database_name
```

**注意**
- 在多用户、多数据库的环境中，确保选择了正确的数据库，避免在错误的数据库上执行操作

### 查看数据库

查看数据库服务器上所有数据库的列表

```bash
  SHOW DATABASE;
```

**注意**
- 这个命令列出所有数据库，但我们可能只能够访问其中一部分，这取决于我们的用户权限

我们还可以获取特定数据库的详细信息，如表结构、大小等。

**示例**

```bash
  SHOW TABLES FROM database_name
  DESCRIBE database_name.table_name
```

**注意**
- 获取数据库信息的方法和可用命令会依据具体的数据库系统而有所不同


